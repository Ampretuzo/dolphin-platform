<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/paper-radio-group/paper-radio-group.html">
<link rel="import" href="../bower_components/paper-radio-button/paper-radio-button.html">


<polymer-element name="icos-radio-group" attributes="data" noscript>
    <template>
        <paper-radio-group selected="{{data.value}}">
            <template repeat="{{option in data.options}}">
                <paper-radio-button name="{{option.key}}" label="{{option.label}}" disabled?="{{data.disabled}}"></paper-radio-button>
            </template>
        </paper-radio-group>
    </template>
</polymer-element>



<polymer-element name="icos-question" attributes="data">
    <template>
        <div style="display:{{data.visible? 'inherited' : 'none'}}">
            <h4>{{data.label}}</h4>
            <template if="{{data.type === 'RADIO_GROUP'}}">
                <icos-radio-group data="{{data}}"></icos-radio-group>
            </template>
        </div>
    </template>
    <script>
        Polymer({
            observe: {
                'data.value': 'updateValue'
            },
            updateValue: function(oldValue, newValue) {
                dolphin.getAt(this.data.dolphinId).findAttributeByPropertyName('value').setValue(newValue);
            }
        });
    </script>
</polymer-element>



<polymer-element name="icos-section" attributes="data" noscript>
    <template>
        <fieldset>
            <legend>
                {{data.label}}
            </legend>
            <template repeat="{{question in data.questions}}">
                <icos-question data="{{question}}"></icos-question>
            </template>
        </fieldset>
    </template>
</polymer-element>



<polymer-element name="icos-questionnaire" attributes="data" noscript>
    <template>
        <div>
            <template repeat="{{section in data.sections}}">
                <icos-section data="{{section}}"></icos-section>
            </template>
        </div>
    </template>
</polymer-element>
